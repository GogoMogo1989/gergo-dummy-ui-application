<h2 mat-dialog-title>Add New User</h2>
<div mat-dialog-content class="addNewUser">
  <form [formGroup]="userForm">
    <mat-form-field appearance="fill">
      <mat-label>First Name</mat-label>
      <input matInput formControlName="first_name" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Last Name</mat-label>
      <input matInput formControlName="last_name" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Username</mat-label>
      <input matInput formControlName="username" required />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" required />
      <mat-error *ngIf="userForm.get('email')?.hasError('required')">
        Please enter your email
      </mat-error>
      <mat-error *ngIf="userForm.get('email')?.hasError('email')">
        Invalid email format
      </mat-error>
    </mat-form-field>

    <mat-label>Gender</mat-label>
    <mat-radio-group formControlName="gender">
      <mat-radio-button value="male">Male</mat-radio-button>
      <mat-radio-button value="female">Female</mat-radio-button>
      <mat-radio-button value="other">Other</mat-radio-button>
    </mat-radio-group>

    <mat-form-field appearance="fill">
      <mat-label>Phone Number</mat-label>
      <input matInput formControlName="phone_number" pattern="^[0-9]{7,}$" />
      <mat-error *ngIf="userForm.get('phone_number')?.hasError('pattern')">
        Invalid phone number format (should contain at least 7 digits)
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Social Insurance Number</mat-label>
      <input matInput formControlName="social_insurance_number" />
    </mat-form-field>

    <mat-label>Date of Birth</mat-label>
    <input
      matInput
      [matDatepicker]="datePicker"
      formControlName="date_of_birth"
    />
    <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
    <mat-datepicker #datePicker></mat-datepicker>

    <mat-form-field appearance="fill">
      <mat-label>Password</mat-label>
      <input matInput formControlName="password" required minlength="8" />
      <mat-error *ngIf="userForm.get('password')?.hasError('required')">
        Please enter your password
      </mat-error>
      <mat-error *ngIf="userForm.get('password')?.hasError('minlength')">
        Password must be at least 8 characters long
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Password*</mat-label>
      <input matInput formControlName="password_confirm" required />
      <mat-error *ngIf="userForm.get('password_confirm')?.hasError('required')">
        Please confirm your password
      </mat-error>
      <mat-error *ngIf="userForm.hasError('passwordMismatch')">
        Passwords must match
      </mat-error>
    </mat-form-field>

    <mat-checkbox formControlName="termsAndConditions">
      I accept the Terms and Conditions
    </mat-checkbox>
  </form>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-button (click)="onSave()" [disabled]="userForm.invalid">
    Save
  </button>
</div>
